Below is a tactical execution breakdown for **Phases 0–7**, with each task mapped to a workstream and paired with concrete acceptance criteria derived from the plan’s deliverables/exit criteria.

---

## Phase 0 — Baseline and Design Locks

### Task 0.1 — Runtime Boundary ADR Package

**Workstream:** WS-A (Runtime contracts and parity)

**Scope:** Author and review ADR(s) that lock installed-runtime vs GitHub-mode boundaries and explicitly define non-regression rules.

**Acceptance Criteria:**

- ADR document set is merged and approved by maintainers.
- Boundaries include ownership, allowed shared modules, and prohibited coupling patterns.
- Backout trigger (“runtime coupling detected”) is documented.

---

### Task 0.2 — Installed Runtime Regression Baseline

**Workstream:** WS-A

**Scope:** Define smoke checks proving installed runtime behavior remains unchanged and wire them into CI.

**Acceptance Criteria:**

- Baseline smoke check suite runs in CI.
- Checks are green on mainline baseline.
- Failing baseline blocks merge for GitHub-mode-touching changes.

---

### Task 0.3 — GitHub Threat Model and Trigger Matrix

**Workstream:** WS-B (GitHub security foundation)

**Scope:** Create trusted/untrusted trigger matrix, abuse cases, and mapped controls for all planned workflows.

**Acceptance Criteria:**

- Threat model approved by maintainers.
- Matrix covers fork PR, internal PR, push, schedule, manual dispatch.
- Every abuse case has at least one mapped preventive/detective control.

**Security Check:** Must encode guardrails that no privileged workflow execution occurs in untrusted contexts and that privileged branch mutation happens only via PR flow.

---

## Phase 1 — Contract Scaffolding and Parity Framework

Task 1 readiness: ✅ Ready to commence (all required runtime contracts exist and `pnpm contracts:github:validate` passes).

### Task 1.1 — Contract Schema Implementation

**Workstream:** WS-A

**Scope:** Add `runtime/github/` contract artifacts (`manifest.schema.json`, `runtime-manifest.json`, `adapter-contracts.json`, `command-policy.json`, `trust-levels.json`, entity/collab schemas, convergence map, parity matrix).

**Task 1 contract dependencies (implemented):**

- Manifest contract: [`runtime/github/manifest.schema.json`](runtime/github/manifest.schema.json), [`runtime/github/runtime-manifest.json`](runtime/github/runtime-manifest.json)
- Policy contract: [`runtime/github/command-policy.json`](runtime/github/command-policy.json)
- Parity contract: [`runtime/github/parity-matrix.json`](runtime/github/parity-matrix.json)
- Convergence contract: [`runtime/github/convergence-map.json`](runtime/github/convergence-map.json)
- Consumption guide: [`runtime/github/README.md`](runtime/github/README.md)
- Validation hook: [`scripts/validate-github-runtime-contracts.ts`](scripts/validate-github-runtime-contracts.ts) via `pnpm contracts:github:validate`

**Acceptance Criteria:**

- All listed files exist with valid schema structure and version markers.
- Schemas are parseable and used by validators.

---

### Task 1.2 — Contract Validation Engine

**Workstream:** WS-A

**Scope:** Implement schema validators for all runtime contract artifacts.

**Acceptance Criteria:**

- CI has a mandatory validation check.
- Invalid schema/data fails CI with actionable error output.
- Validation covers entity and collaboration schemas, not just runtime manifest.

---

### Task 1.3 — Parity and Convergence Validators

**Workstream:** WS-A

**Scope:** Implement parity-matrix validator (owner + rationale required for installed-only) and convergence-map validator (fails on unmapped high-value installed workflows).

**Acceptance Criteria:**

- Validator fails when installed-only entries lack owner/rationale.
- Validator fails when high-value workflows are unmapped.
- Parity report artifact is generated per PR affecting relevant subsystems.

---

### Task 1.4 — Contract Versioning and Compatibility Policy

**Workstream:** WS-G (Observability/compliance/governance)

**Scope:** Define incompatible-change process (migration notes + compatibility validator updates) and enforce in CI.

**Acceptance Criteria:**

- Incompatible schema change without migration notes fails.
- Compatibility validator is updated as part of breaking changes.
- Process is documented in contributor workflow.

---

## Phase 2 — Security Foundation (GitHub-native)

### Task 2.1 — Secrets Inventory and Rotation Standard

**Workstream:** WS-B

**Scope:** Produce secret inventory, ownership, rotation intervals, and emergency revocation process.

**Acceptance Criteria:**

- Inventory covers all GitHub-mode workflows requiring secret material.
- Rotation policy document is published and linked in ops docs.
- Owners and review cadence are defined.

**Security Check:** Must enforce “GitHub mode never requires custom in-repo secret vaulting” and “secrets only via GitHub Secrets/Environment Secrets”.

---

### Task 2.2 — Environment Protection Configuration

**Workstream:** WS-B

**Scope:** Configure `github-mode-dev`, `github-mode-staging`, `github-mode-prod` environments with required reviewers + branch/tag restrictions.

**Acceptance Criteria:**

- All three environments exist with reviewer gates and restrictions.
- Promotion paths require environment approval.
- Unauthorized branch/tag attempts are blocked.

**Security Check:** Must enforce guardrails for approval-gated promotion and no direct privileged branch mutations.

---

### Task 2.3 — Workflow Permission Hardening

**Workstream:** WS-B

**Scope:** Add explicit least-privilege permissions: at workflow/job level for all GitHub-mode pipelines.

**Acceptance Criteria:**

- No GitHub-mode workflow relies on default token permissions.
- Security lint passes for over-broad permissions.
- Fork PR jobs have zero secret access.

---

### Task 2.4 — OIDC Adoption for Cloud Access

**Workstream:** WS-B

**Scope:** Replace static cloud credentials with OIDC where applicable and document trust relationships.

**Acceptance Criteria:**

- OIDC configured for applicable cloud paths.
- Static long-lived cloud credentials removed from workflow usage.
- Fallback paths documented only for non-OIDC-compatible systems.

**Security Check:** Must satisfy checklist item: “OIDC replaces static cloud credentials where possible”.

---

### Task 2.5 — Security Lint and Simulation Harness

**Workstream:** WS-B

**Scope:** Implement lint/tests that fail on unpinned actions, broad permissions, and secret exposure in untrusted triggers.

**Acceptance Criteria:**

- Lint blocks unpinned third-party actions.
- Lint blocks broad permissions and unsafe trigger/secret combinations.
- Simulated fork PR run confirms no secret availability.

**Security Check:** Must enforce “all third-party actions pinned to full commit SHA.”

---

## Phase 3 — Validation, Simulation, Eval, and Cost Workflows

### Task 3.1 — Core CI Workflow Set Implementation

**Workstream:** WS-C (Validation/policy/eval/cost)

**Scope:** Implement `github-mode-build/check/test/policy/route-sim/eval-tier0/cost/sync-templates`.

**Acceptance Criteria:**

- All named workflows exist and trigger correctly.
- Each emits deterministic artifacts + markdown summaries.
- Required checks are wired to merge gates.

---

### Task 3.2 — Untrusted-Safe Fork Execution Paths

**Workstream:** WS-B

**Scope:** Ensure all Phase 3 workflows run safely for untrusted fork PR contexts.

**Acceptance Criteria:**

- Fork executions complete without secret access.
- Privileged steps are skipped/guarded for untrusted actors.
- Tests/simulations demonstrate enforcement.

**Security Check:** Must preserve “no privileged workflow execution from untrusted contexts.”

---

### Task 3.3 — Policy/Route Drift Detection

**Workstream:** WS-C

**Scope:** Add drift detection for policy and route changes with fail conditions and readable output.

**Acceptance Criteria:**

- Drift is detected and surfaced in summaries/artifacts.
- Drift failures block promotion-related workflows.
- Output includes remediation pointers.

---

### Task 3.4 — Eval/Cost Threshold Gates

**Workstream:** WS-C

**Scope:** Define and enforce threshold gates for eval and cost outcomes.

**Acceptance Criteria:**

- Thresholds are versioned and policy-governed.
- Failing thresholds block promotion.
- Gate results are attached to run artifacts.

---

### Task 3.5 — Template Drift + Migration Guidance

**Workstream:** WS-F (Multi-entity template/collaboration)

**Scope:** Implement template drift detection and auto-generated migration guidance/PR output.

**Acceptance Criteria:**

- Drift is detected against template baseline.
- Guidance is generated consistently in PR/run summary.
- Required checks remain green only when drift is acknowledged/resolved.

---

## Phase 4 — Command Runtime and Bot PR Loop

### Task 4.1 — Command Workflow Implementation

**Workstream:** WS-D (Command runtime and bot PR loop)

**Scope:** Implement `github-mode-command.yml`, `github-mode-agent-run.yml`, `github-mode-bot-pr.yml`.

**Acceptance Criteria:**

- All three workflows execute in intended sequence.
- Command baseline (explain, refactor, test, diagram) is supported.
- End-to-end command-to-PR works for trusted users.

---

### Task 4.2 — Trust-Aware Authorization Layer

**Workstream:** WS-D

**Scope:** Enforce trust-level-based command authorization and privileged adapter restrictions.

**Acceptance Criteria:**

- Trusted actors can invoke authorized privileged flows.
- Untrusted actors are denied privileged adapters/secret-backed paths.
- Denials are explicit and auditable.

**Security Check:** Must enforce guardrail “no privileged execution from untrusted contexts.”

---

### Task 4.3 — Policy-Gated Adapter Invocation

**Workstream:** WS-C

**Scope:** Ensure adapter invocations are policy-checked before execution.

**Acceptance Criteria:**

- Every adapter call has policy decision evidence.
- Policy failures halt execution safely.
- Decision metadata is persisted in artifacts.

---

### Task 4.4 — Provenance Metadata Embedding

**Workstream:** WS-G

**Scope:** Embed source command, commit SHA, run id, and policy version in outputs/PR artifacts.

**Acceptance Criteria:**

- Provenance fields present for all command outputs.
- Metadata schema is standardized and machine-parseable.
- Missing provenance fails validation.

---

### Task 4.5 — Protected Branch Mutation Controls

**Workstream:** WS-B

**Scope:** Ensure bot changes only via PR workflow; block direct writes to protected branches.

**Acceptance Criteria:**

- Bot cannot push directly to protected branches.
- All mutations are traceable to PR runs.
- Controls are tested via negative cases.

**Security Check:** Must enforce guardrail “all privileged branch mutations via PR workflow only.”

---

## Phase 5 — Promotion, Attestation, and Incident Operations

### Task 5.1 — Promotion Pipeline Implementation

**Workstream:** WS-E (Promotion/attestation/incident ops)

**Scope:** Implement `github-mode-promote-dev/staging/prod.yml` with gate dependencies.

**Acceptance Criteria:**

- Promotions require green required checks.
- Environment approvals are mandatory.
- Failed gates prevent promotion.

---

### Task 5.2 — Attestation Generation + Verification

**Workstream:** WS-E

**Scope:** Generate and verify attestations with required fields (commit/environment, revisions, model/dataset, eval/cost, approvers+UTC, artifact/run refs).

**Acceptance Criteria:**

- Attestation exists for each promotion attempt.
- Verification fails on missing/invalid required fields.
- Verified attestation is mandatory for promotion success.

**Security Check:** Must enforce guardrails for approval-gated promotion and continuous compliance evidence.

---

### Task 5.3 — Drift and Incident Automation

**Workstream:** WS-E

**Scope:** Implement `github-mode-drift.yml` and `github-mode-incident.yml` with evidence-linked issue creation.

**Acceptance Criteria:**

- Drift and incident workflows auto-create linked evidence artifacts/issues.
- Incident records include run and artifact references.
- Attestation verification failure auto-opens incident path.

---

### Task 5.4 — Promotion Failure Backout Controls

**Workstream:** WS-E

**Scope:** Implement blocking behavior + rollback procedures when attestation or gate verification fails.

**Acceptance Criteria:**

- Promotion is automatically blocked on attestation failure.
- Incident issue is generated automatically.
- Rollback/runbook link is attached in incident output.

---

## Phase 6 — Multi-Entity Bootstrap and Collaboration

### Task 6.1 — Entity Bootstrap Workflow

**Workstream:** WS-F

**Scope:** Implement `github-mode-bootstrap-entity.yml` for template-based entity creation.

**Acceptance Criteria:**

- New entities are generated with baseline structure.
- Bootstrap output includes validation report and remediation pointers.
- Re-run is idempotent for unchanged templates.

---

### Task 6.2 — Entity Baseline Validator

**Workstream:** WS-F

**Scope:** Validate labels, issue forms, PR templates, CODEOWNERS, environment placeholders, branch protection expectations.

**Acceptance Criteria:**

- Validator covers all listed baseline components.
- Missing baseline elements fail validation.
- Reports are attached to workflow artifacts.

---

### Task 6.3 — Collaboration Dispatch/Receive Workflows

**Workstream:** WS-F

**Scope:** Implement `github-mode-collab-dispatch.yml` and `github-mode-collab-receive.yml`.

**Acceptance Criteria:**

- Allowlisted intents dispatch/receive successfully across two generated entities.
- Rejected intents produce explicit denial reasons and audit evidence.
- Latency/success signals emitted for observability.

---

### Task 6.4 — Deny-by-Default Policy + Envelope Validation

**Workstream:** WS-B

**Scope:** Enforce collaboration policy routes and envelope validation (source/target, intent, correlation id, run id, policy version, ttl).

**Acceptance Criteria:**

- Non-allowlisted intents are denied by default.
- Envelope schema violations are rejected before execution.
- Audit traces capture decision + payload metadata.

**Security Check:** Must enforce guardrail for deny-by-default trust model and untrusted intent rejection with evidence.

---

### Task 6.5 — Abuse/Fault Containment Mode

**Workstream:** WS-E

**Scope:** Add operational control to disable dispatch permissions while keeping receive validation in monitor-only mode.

**Acceptance Criteria:**

- Toggle can be activated rapidly during incidents.
- Dispatch stops without breaking passive validation.
- Incident trail records who toggled and why.

---

## Phase 7 — Observability, Compliance, and Program Handoff

### Task 7.1 — Artifact + Summary Standardization

**Workstream:** WS-G

**Scope:** Define and adopt standardized artifact schemas and workflow summary format across phases.

**Acceptance Criteria:**

- Schema docs published and referenced by all GitHub-mode workflows.
- Validation confirms schema conformance.
- Maintainers can compare outputs across workflows consistently.

---

### Task 7.2 — Metrics Pipeline Implementation

**Workstream:** WS-G

**Scope:** Build metrics/reporting for parity trend, reliability/flakiness, bot PR throughput/acceptance, collaboration outcomes/latency, policy/security violations, promotion lead/rollback time.

**Acceptance Criteria:**

- Dashboards or reports available to maintainers.
- Metrics cover all listed dimensions.
- Data freshness/SLOs defined and monitored.

---

### Task 7.3 — Governance Playbooks

**Workstream:** WS-G

**Scope:** Publish operational playbooks for key rotation, emergency revocation, compromised token response, attestation audit + rollback.

**Acceptance Criteria:**

- Playbooks are reviewed and approved.
- Docs link all playbooks from governance hub.
- Incident responders can execute playbooks without tribal knowledge.

**Security Check:** Must include guardrail-aligned procedures for secret rotation, token compromise response, and continuous compliance checks.

---

### Task 7.4 — Compliance Enforcement Automation

**Workstream:** WS-B

**Scope:** Add continuous checks for security acceptance checklist controls (pinning, permissions, trigger safety, branch protections, attestation gating, artifact scrubbing).

**Acceptance Criteria:**

- Compliance checks run continuously in CI.
- Violations are blocking for protected promotion paths.
- Secret leakage risk scanning is included for logs/artifacts.

**Security Check:** Must enforce: SHA-pinned third-party actions, explicit minimal `GITHUB_TOKEN` permissions, no direct writes to protected branches, promotion requires valid attestation.

---

### Task 7.5 — Program Handoff and Ownership Transfer

**Workstream:** WS-G

**Scope:** Complete milestone closeout package (M1–M7 evidence), owner assignment, and runbook handoff to maintainers.

**Acceptance Criteria:**

- Exit evidence mapped to each phase and DoD criterion.
- Ongoing owners assigned for each workflow/workstream.
- Handoff sign-off recorded by maintainers.

---

## Suggested Execution Packaging (optional)

- Epic per phase
- Stories per task above
- Subtasks for workflow files/tests/docs

Label stories by **workstream (WS-A…WS-G)** and **milestone (M1…M7)** for dependency tracking.
